<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Leaflet Map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" />

    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.2.3/dist/esri-leaflet.js"></script>

    <!-- Load Esri Leaflet Renderers from CDN -->
    <script src="https://unpkg.com/esri-leaflet-renderers@2.0.6/dist/esri-leaflet-renderers.js"></script>

    <style>
        html,
        body,
        #map {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

    </style>
    
</head>
    
<body>
    
    <header>
        <h1> <p style="font-family: serif; color: darkgreen; font-size: 30px;">Bicycle and Pedestrain Counts of Duluth, Minnesota</p> </h1>
            
        <h3> <p style="font-family: serif; color: darkgrey; font-size: 16px;">GIS 4533 Web-based GIS <br>Authors: Keely Hansen, Sam Sharp and Ryan Peterson<br>Source: Arrowhead Regional Developement Commision (ARDC) </p> </h3>
        
    </header>
    
    <!--    Added parameters to allow full screen map, removed pixel dimentions from http://www.d3noob.org/2014/02/make-your-leafletjs-map-full-screen.html-->
    <div id="map"></div>
    
    <!-- Container for displaying map coordinates-->
    <pre id= 'info'></pre>
    
    <!--  Leaflet Java Script plugin-->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
    
    <script>  
        
    // Create variable to hold map element, give initial settings to map
    var map = L.map('map',{ center: [46.782518, -92.105790], zoom: 14});
    
    // Add new base map layer to map from http://leaflet-extras.github.io/leaflet-providers/preview/
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', { attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC' }).addTo(map);
        
    // add hosted feature layer
        const PedCountsLayer = L.esri.featureLayer({url: 'https://services.arcgis.com/8df8p0NlLFEShl0r/arcgis/rest/services/Bike_Duluth/FeatureServer/0'
        }).addTo(map);
        
     // set up popup for PedCounts layer
        PedCountsLayer.bindPopup(function(evt) {
            return L.Util.template(
                '<h3>{Count}</h3>', evt.feature.properties);
        });

    // add hosted feature layer
        const BikeCounts = L.esri.featureLayer({
            url: 'https://services.arcgis.com/8df8p0NlLFEShl0r/arcgis/rest/services/Bike_Duluth/FeatureServer/0'
        }).addTo(map);
        
     // set up popup for PedCounts layer
        BikeCounts.bindPopup(function(evt) {
            return L.Util.template(
                '<h3>{Count}</h3>', evt.feature.properties);
        });

        
    // Add map coordinates on mouse move
    // https://docs.mapbox.com/,apbox-gl-js/example/mouse-position/
    // demonstration in class from Kris Johnson
    map.on('mousemove', function (e) {
        console.log ('mousemove', e);
        document.getElementById('info').innerHTML=
        "Map Corrdinates: " +JSON.stringify(e.latlng);
    });
        
    // Add map coordinates on mouse move
    // https://docs.mapbox.com/,apbox-gl-js/example/mouse-position/
    // demonstration in class from Kris Johnson
    map.on('mousemove', function (e) {
        console.log ('mousemove', e);
        document.getElementById('info').innerHTML=
        "Map Corrdinates: " +JSON.stringify(e.latlng);
    });

    </script>   
    
</body>
</html>